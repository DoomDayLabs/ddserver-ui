webpackJsonp([1],{

/***/ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/dashboard/dashboardlist-style.css":
/* no static exports found */
/* all exports used */
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./~/css-loader?{"modules":true,"sourceMap":true,"localIdentName":"[name]__[local]--[hash:base64:8]"}!./~/postcss-loader/lib!./src_admin/dashboard/dashboardlist-style.css ***!
  \*********************************************************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../~/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(true);
// imports


// module
exports.push([module.i, ".dashboardlist-style__fab--1kiyKj_Z{\n    position: absolute;\n    bottom: 3em;\n    right: 3em;\n}", "", {"version":3,"sources":["/Volumes/WORK/doom-day-device/ddserver-ui/src_admin/dashboard/dashboardlist-style.css"],"names":[],"mappings":"AAAA;IACI,mBAAmB;IACnB,YAAY;IACZ,WAAW;CACd","file":"dashboardlist-style.css","sourcesContent":[".fab{\n    position: absolute;\n    bottom: 3em;\n    right: 3em;\n}"],"sourceRoot":""}]);

// exports
exports.locals = {
	"fab": "dashboardlist-style__fab--1kiyKj_Z"
};

/***/ }),

/***/ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/devices/devices-style.css":
/* no static exports found */
/* all exports used */
/*!*************************************************************************************************************************************************************************!*\
  !*** ./~/css-loader?{"modules":true,"sourceMap":true,"localIdentName":"[name]__[local]--[hash:base64:8]"}!./~/postcss-loader/lib!./src_admin/devices/devices-style.css ***!
  \*************************************************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../~/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(true);
// imports


// module
exports.push([module.i, ".devices-style__devicesPane--2c2dWXwR{\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n}\n\n.devices-style__devicesPane--2c2dWXwR>div{\n    margin: 0.5em;\n}", "", {"version":3,"sources":["/Volumes/WORK/doom-day-device/ddserver-ui/src_admin/devices/devices-style.css"],"names":[],"mappings":"AAAA;IACI,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,wBAAwB;QACpB,qBAAqB;YACjB,4BAA4B;CACvC;;AAED;IACI,cAAc;CACjB","file":"devices-style.css","sourcesContent":[".devicesPane{\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n}\n\n.devicesPane>div{\n    margin: 0.5em;\n}"],"sourceRoot":""}]);

// exports
exports.locals = {
	"devicesPane": "devices-style__devicesPane--2c2dWXwR"
};

/***/ }),

/***/ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/devices/styles.css":
/* no static exports found */
/* all exports used */
/*!******************************************************************************************************************************************************************!*\
  !*** ./~/css-loader?{"modules":true,"sourceMap":true,"localIdentName":"[name]__[local]--[hash:base64:8]"}!./~/postcss-loader/lib!./src_admin/devices/styles.css ***!
  \******************************************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../~/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(true);
// imports


// module
exports.push([module.i, ".styles__viewCard--2vI3zeJ4{\n    position: relative;\n}\n.styles__menuIcon--3yjG8tXG{\n    position: absolute;\n    top: 1em;\n    right: 0.5em;\n}\n.styles__expanded--2cIv7oSW{\n    /*max-height: 1000px;*/\n    transition: all 1000ms 100ms ease;\n    overflow: hidden;\n}\n.styles__closed--VuG7Bfy9{\n    max-height: 0px;    \n    transition: all 1000ms 100ms ease;\n    overflow: hidden;\n}", "", {"version":3,"sources":["/Volumes/WORK/doom-day-device/ddserver-ui/src_admin/devices/styles.css"],"names":[],"mappings":"AAAA;IACI,mBAAmB;CACtB;AACD;IACI,mBAAmB;IACnB,SAAS;IACT,aAAa;CAChB;AACD;IACI,uBAAuB;IACvB,kCAAkC;IAClC,iBAAiB;CACpB;AACD;IACI,gBAAgB;IAChB,kCAAkC;IAClC,iBAAiB;CACpB","file":"styles.css","sourcesContent":[".viewCard{\n    position: relative;\n}\n.menuIcon{\n    position: absolute;\n    top: 1em;\n    right: 0.5em;\n}\n.expanded{\n    /*max-height: 1000px;*/\n    transition: all 1000ms 100ms ease;\n    overflow: hidden;\n}\n.closed{\n    max-height: 0px;    \n    transition: all 1000ms 100ms ease;\n    overflow: hidden;\n}"],"sourceRoot":""}]);

// exports
exports.locals = {
	"viewCard": "styles__viewCard--2vI3zeJ4",
	"menuIcon": "styles__menuIcon--3yjG8tXG",
	"expanded": "styles__expanded--2cIv7oSW",
	"closed": "styles__closed--VuG7Bfy9"
};

/***/ }),

/***/ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/devices/wizzard-style.css":
/* no static exports found */
/* all exports used */
/*!*************************************************************************************************************************************************************************!*\
  !*** ./~/css-loader?{"modules":true,"sourceMap":true,"localIdentName":"[name]__[local]--[hash:base64:8]"}!./~/postcss-loader/lib!./src_admin/devices/wizzard-style.css ***!
  \*************************************************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ../../~/css-loader/lib/css-base.js */ "./node_modules/css-loader/lib/css-base.js")(true);
// imports


// module
exports.push([module.i, ".wizzard-style__congratulationIcon--3nBm6Krk{\n    font-size: 8em;\n    display: block;\n    text-align: center;\n}", "", {"version":3,"sources":["/Volumes/WORK/doom-day-device/ddserver-ui/src_admin/devices/wizzard-style.css"],"names":[],"mappings":"AAAA;IACI,eAAe;IACf,eAAe;IACf,mBAAmB;CACtB","file":"wizzard-style.css","sourcesContent":[".congratulationIcon{\n    font-size: 8em;\n    display: block;\n    text-align: center;\n}"],"sourceRoot":""}]);

// exports
exports.locals = {
	"congratulationIcon": "wizzard-style__congratulationIcon--3nBm6Krk"
};

/***/ }),

/***/ "./src_admin/api.js":
/* no static exports found */
/* all exports used */
/*!**************************!*\
  !*** ./src_admin/api.js ***!
  \**************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _eventbus = __webpack_require__(/*! ./eventbus */ "./src_admin/eventbus.js");

var _eventbus2 = _interopRequireDefault(_eventbus);

var _popsicle = __webpack_require__(/*! popsicle */ "./node_modules/popsicle/dist/common.js");

var _popsicle2 = _interopRequireDefault(_popsicle);

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(/*! react-dom */ "./node_modules/react-dom/index.js");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _dialog = __webpack_require__(/*! react-toolbox/lib/dialog */ "./node_modules/react-toolbox/lib/dialog/index.js");

var _dialog2 = _interopRequireDefault(_dialog);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ErrorDialog = function (_React$Component) {
    _inherits(ErrorDialog, _React$Component);

    function ErrorDialog() {
        _classCallCheck(this, ErrorDialog);

        var _this = _possibleConstructorReturn(this, (ErrorDialog.__proto__ || Object.getPrototypeOf(ErrorDialog)).call(this));

        _this.state = {
            timeout: 20
        };
        setInterval(function () {
            var timeout = _this.state.timeout - 1;
            if (timeout == 0) {
                _this.handleReloadClick();
            } else {
                _this.setState({ timeout: timeout });
            }
        }, 1000, 1000);
        return _this;
    }

    _createClass(ErrorDialog, [{
        key: 'handleReloadClick',
        value: function handleReloadClick() {
            window.location.reload();
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            return _react2.default.createElement(
                _dialog2.default,
                {
                    active: true,
                    title: this.props.error.title,
                    actions: [{ icon: 'refresh', label: 'Reload page (' + this.state.timeout + ')', onClick: function onClick() {
                            return _this2.handleReloadClick();
                        } }] },
                _react2.default.createElement(
                    'span',
                    null,
                    this.props.error.text
                )
            );
        }
    }]);

    return ErrorDialog;
}(_react2.default.Component);

function makeError(error) {
    _reactDom2.default.render(_react2.default.createElement(ErrorDialog, { error: error }), document.getElementById('error'));
}
var host = 'localhost';
// var host = '192.168.0.125';
function addr(e) {
    return 'http://' + host + ':8080/dds/admin/' + e;
}

var w = new WebSocket('ws://' + host + ':8080/dds/admin/event.ws');

w.onmessage = function (msg) {
    //console.log(msg.data);
    var msgObject = JSON.parse(msg.data);
    //console.log(msgObject);
    _eventbus2.default.emit(msgObject.key, msgObject.payload);
};
w.onclose = function () {
    makeError({ title: 'Опаньки! Что-то пошло не так :(', text: 'Lost connection with server. Try reload page' });
};

(0, _popsicle.get)(addr('device/list')).then(function (e) {
    devices = JSON.parse(e.body);
    _eventbus2.default.emit('/device/list/updated');
});

var devices = [];

_eventbus2.default.subscribe('/device/profile/updated', function (d) {
    var existDevi = devices.find(function (dev) {
        return dev.id === d.id;
    });
    console.log(existDevi, d);
    Object.assign(existDevi, _extends({}, d));

    _eventbus2.default.emit('/device/list/updated');
});

_eventbus2.default.subscribe('/device/discovered', function (d) {
    if (devices.find(function (dev) {
        return dev.id === d.id;
    })) {} else {
        _eventbus2.default.emit('/device/discover', d);
        devices.push(d);
        _eventbus2.default.emit('/device/list/updated');
    }
});

function getDevices() {
    return devices;
}

function authorizeDevice(device) {
    (0, _popsicle.request)({
        method: 'POST',
        url: addr('device/update'),
        body: device
    }).then(function (e) {});
}

function forgetDevice(d) {
    var i = devices.findIndex(function (e) {
        return e.id === d.id;
    });
    console.log(i);
    if (i > -1) {
        devices.splice(i, 1);
        _eventbus2.default.emit('/device/list/updated');
        (0, _popsicle.request)({
            method: 'POST',
            url: addr('device/forget'),
            body: {
                id: d.id
            }
        });
    }
}

function getDashboards() {
    var p = new Promise(function (resolve, reject) {
        (0, _popsicle.request)({
            method: 'GET',
            url: addr('dashboard/list')
        }).then(function (e) {
            return JSON.parse(e.body);
        }).then(resolve);
    });

    return p;
}

function getWidgetClasses(profile) {
    return new Promise(function (resolve, reject) {
        (0, _popsicle.request)({
            method: 'GET',
            url: '/widgetclasses.json?profile=' + profile
        }).then(function (e) {
            return JSON.parse(e.body);
        }).then(resolve);
    });
}

function loadWidgetSource(widgetClass) {
    return Promise.all((0, _popsicle.request)({
        method: 'GET',
        url: '/ext/' + widgetClass + '/widget.js'
    }).then(function (e) {
        return e.body;
    }));
}

function appendWidget(dashboard, config) {
    return new Promise(function (resolve) {
        setTimeout(resolve, 2000);
    });
}

function saveDashboard(dashboard) {
    return (0, _popsicle.request)({
        method: 'POST',
        url: addr('dashboard/save'),
        body: dashboard
    }).then(function ($r) {
        return JSON.parse($r.body);
    });
}

function removeDashboard(d) {
    return (0, _popsicle.request)({
        method: 'POST',
        url: addr('dashboard/remove'),
        body: {
            _id: d._id
        }
    });
}
var api = {
    getDevices: getDevices,
    authorizeDevice: authorizeDevice,
    forgetDevice: forgetDevice,
    updateDevice: authorizeDevice,
    showError: makeError,

    getWidgetClasses: getWidgetClasses,
    loadWidgetSource: loadWidgetSource,
    appendWidget: appendWidget,
    getDashboards: getDashboards,
    saveDashboard: saveDashboard,
    removeDashboard: removeDashboard

};

exports.default = api;

/***/ }),

/***/ "./src_admin/app.js":
/* no static exports found */
/* all exports used */
/*!**************************!*\
  !*** ./src_admin/app.js ***!
  \**************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _reactDom = __webpack_require__(/*! react-dom */ "./node_modules/react-dom/index.js");

var _reactDom2 = _interopRequireDefault(_reactDom);

var _reactToolbox = __webpack_require__(/*! react-toolbox */ "./node_modules/react-toolbox/lib/index.js");

var _list = __webpack_require__(/*! react-toolbox/lib/list */ "./node_modules/react-toolbox/lib/list/index.js");

var _eventbus = __webpack_require__(/*! ./eventbus */ "./src_admin/eventbus.js");

var _eventbus2 = _interopRequireDefault(_eventbus);

var _devices = __webpack_require__(/*! ./devices/devices.js */ "./src_admin/devices/devices.js");

var _dashboard = __webpack_require__(/*! ./dashboard/dashboard */ "./src_admin/dashboard/dashboard.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Пахом = function (_React$Component) {
    _inherits(Пахом, _React$Component);

    function Пахом() {
        _classCallCheck(this, Пахом);

        var _this = _possibleConstructorReturn(this, (Пахом.__proto__ || Object.getPrototypeOf(Пахом)).call(this));

        _this.state = {
            курлык: '',
            поехать: false
        };
        return _this;
    }

    _createClass(Пахом, [{
        key: 'componentWillMount',
        value: function componentWillMount() {
            var _this2 = this;

            _eventbus2.default.subscribe('/курлык', function (e) {
                _this2.setState({
                    курлык: _react2.default.createElement(
                        'div',
                        null,
                        _react2.default.createElement(
                            _reactToolbox.Avatar,
                            null,
                            _react2.default.createElement('img', { src: 'http://cs4.pikabu.ru/post_img/2016/01/06/8/145208281112075926.jpg' })
                        ),
                        e.title
                    ),
                    поехать: true
                });
            });
        }
    }, {
        key: 'render',
        value: function render() {
            return _react2.default.createElement(_reactToolbox.Snackbar, {
                active: this.state.поехать,
                label: this.state.курлык,
                timeout: 2000
            });
        }
    }]);

    return Пахом;
}(_react2.default.Component);

var App = function (_React$Component2) {
    _inherits(App, _React$Component2);

    function App() {
        _classCallCheck(this, App);

        var _this3 = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this));

        _this3.state = {
            snackbar: { active: false, label: null, onClick: null, action: null },
            drawerPinned: false
        };
        _this3.views = {
            'devices': _react2.default.createElement(_devices.Devices, { onMenuClick: function onMenuClick() {
                    return _this3.handleAppMenuClick();
                } }),
            'dashboards': _react2.default.createElement(_dashboard.DashboardsList, { onMenuClick: function onMenuClick() {
                    return _this3.handleAppMenuClick();
                } })
        };
        return _this3;
    }

    _createClass(App, [{
        key: 'handleAppMenuClick',
        value: function handleAppMenuClick() {
            console.log('Menu click');
            this.setState({ drawerPinned: !this.state.drawerPinned });
        }
    }, {
        key: 'handleMenuSelect',
        value: function handleMenuSelect(view) {
            this.setState({ drawerPinned: false, view: view });
        }
    }, {
        key: 'componentWillMount',
        value: function componentWillMount() {
            var view = window.location.hash.replace('#', '');
            if (!view) view = 'devices';
            this.setState({ view: view });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this4 = this;

            return _react2.default.createElement(
                _reactToolbox.Layout,
                null,
                _react2.default.createElement(
                    _reactToolbox.NavDrawer,
                    {
                        active: this.state.drawerPinned,
                        onOverlayClick: function onOverlayClick() {
                            return _this4.handleAppMenuClick();
                        } },
                    _react2.default.createElement(
                        _list.List,
                        { selectable: true },
                        _react2.default.createElement(_list.ListItem, { caption: 'Devices', leftIcon: 'memory', onClick: function onClick() {
                                return _this4.handleMenuSelect('devices');
                            } }),
                        _react2.default.createElement(_list.ListItem, { caption: 'Dashboards', leftIcon: 'dashboard', onClick: function onClick() {
                                return _this4.handleMenuSelect('dashboards');
                            } })
                    )
                ),
                _react2.default.createElement(
                    _reactToolbox.Panel,
                    null,
                    this.views[this.state.view]
                ),
                _react2.default.createElement(Пахом, null)
            );
        }
    }]);

    return App;
}(_react2.default.Component);

_reactDom2.default.render(_react2.default.createElement(App, null), document.getElementById("root"));

/***/ }),

/***/ "./src_admin/components/iconselector.js":
/* no static exports found */
/* all exports used */
/*!**********************************************!*\
  !*** ./src_admin/components/iconselector.js ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _reactToolbox = __webpack_require__(/*! react-toolbox */ "./node_modules/react-toolbox/lib/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var IconSelector = function (_React$Component) {
    _inherits(IconSelector, _React$Component);

    function IconSelector(props) {
        _classCallCheck(this, IconSelector);

        var _this = _possibleConstructorReturn(this, (IconSelector.__proto__ || Object.getPrototypeOf(IconSelector)).call(this));

        _this.values = [{ label: 'ICON1', value: 'exit_to_app' }, { label: 'ICON2', value: 'extension' }, { label: 'ICON1', value: 'explore' }];
        _this.state = { value: props.value || null };
        return _this;
    }

    _createClass(IconSelector, [{
        key: 'template',
        value: function template(item) {
            return _react2.default.createElement(_reactToolbox.FontIcon, { value: item.value });
        }
    }, {
        key: 'handleChange',
        value: function handleChange(value) {
            if (this.props.onChange) this.props.onChange(value);
            console.log(value);
            this.setState({ value: value });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            return _react2.default.createElement(_reactToolbox.Dropdown, {
                auto: true,
                label: this.props.label,
                source: this.values,
                value: this.state.value,
                template: this.template,
                onChange: function onChange(value) {
                    return _this2.handleChange(value);
                }
            });
        }
    }]);

    return IconSelector;
}(_react2.default.Component);

exports.default = IconSelector;

/***/ }),

/***/ "./src_admin/components/index.js":
/* no static exports found */
/* all exports used */
/*!***************************************!*\
  !*** ./src_admin/components/index.js ***!
  \***************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.IconSelector = undefined;

var _iconselector = __webpack_require__(/*! ./iconselector */ "./src_admin/components/iconselector.js");

var _iconselector2 = _interopRequireDefault(_iconselector);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var IconSelector = exports.IconSelector = _iconselector2.default;

/***/ }),

/***/ "./src_admin/dashboard/dashboard.js":
/* no static exports found */
/* all exports used */
/*!******************************************!*\
  !*** ./src_admin/dashboard/dashboard.js ***!
  \******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.DashboardsList = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _app_bar = __webpack_require__(/*! react-toolbox/lib/app_bar */ "./node_modules/react-toolbox/lib/app_bar/index.js");

var _app_bar2 = _interopRequireDefault(_app_bar);

var _list = __webpack_require__(/*! react-toolbox/lib/list */ "./node_modules/react-toolbox/lib/list/index.js");

var _menu = __webpack_require__(/*! react-toolbox/lib/menu */ "./node_modules/react-toolbox/lib/menu/index.js");

var _reactToolbox = __webpack_require__(/*! react-toolbox */ "./node_modules/react-toolbox/lib/index.js");

var _components = __webpack_require__(/*! ../components */ "./src_admin/components/index.js");

var _api = __webpack_require__(/*! ../api */ "./src_admin/api.js");

var _api2 = _interopRequireDefault(_api);

var _eventbus = __webpack_require__(/*! ../eventbus */ "./src_admin/eventbus.js");

var _eventbus2 = _interopRequireDefault(_eventbus);

var _dashboardlistStyle = __webpack_require__(/*! ./dashboardlist-style */ "./src_admin/dashboard/dashboardlist-style.css");

var _dashboardlistStyle2 = _interopRequireDefault(_dashboardlistStyle);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var DashboardEditor = function (_React$Component) {
    _inherits(DashboardEditor, _React$Component);

    function DashboardEditor() {
        _classCallCheck(this, DashboardEditor);

        var _this = _possibleConstructorReturn(this, (DashboardEditor.__proto__ || Object.getPrototypeOf(DashboardEditor)).call(this));

        _this.state = {
            active: false
        };
        _this.actions = [{ label: 'Cancel', icon: 'cancel', onClick: function onClick() {
                return _this.handleCancelClick();
            } }, { label: 'Save', icon: 'check', onClick: function onClick() {
                return _this.handleApplyClick();
            }, primary: true, raised: true }];
        return _this;
    }

    _createClass(DashboardEditor, [{
        key: 'edit',
        value: function edit(d) {
            var _this2 = this;

            return new Promise(function (resolve, reject) {
                var state = _extends({}, d);
                state.active = true;
                _this2.setState(state);

                _this2.$resolve = resolve;
                _this2.$reject = reject;
            });
        }
    }, {
        key: 'handleApplyClick',
        value: function handleApplyClick() {
            var _this3 = this;

            if (!this.state.title || !this.state.icon) return;
            var d = this.state;
            delete d.active;
            this.setState({ active: false });
            _api2.default.saveDashboard(d).then(function (dashboard) {
                _this3.$resolve(dashboard);
            });
        }
    }, {
        key: 'handleCancelClick',
        value: function handleCancelClick() {
            this.setState({ active: false });
            this.$reject;
        }
    }, {
        key: 'error',
        value: function error() {
            return this.state.title ? false : 'Name is empty';
        }
    }, {
        key: 'render',
        value: function render() {
            var _this4 = this;

            return _react2.default.createElement(
                _reactToolbox.Dialog,
                {
                    active: this.state.active,
                    actions: this.actions },
                _react2.default.createElement(_reactToolbox.Input, { label: 'Dashboard title', required: true, value: this.state.title, onChange: function onChange(title) {
                        return _this4.setState({ title: title });
                    }, error: this.error() }),
                _react2.default.createElement(_components.IconSelector, { label: 'Dashboard icon', value: this.state.icon, onChange: function onChange(icon) {
                        return _this4.setState({ icon: icon });
                    } })
            );
        }
    }]);

    return DashboardEditor;
}(_react2.default.Component);

var DashboardRemover = function (_React$Component2) {
    _inherits(DashboardRemover, _React$Component2);

    function DashboardRemover() {
        _classCallCheck(this, DashboardRemover);

        var _this5 = _possibleConstructorReturn(this, (DashboardRemover.__proto__ || Object.getPrototypeOf(DashboardRemover)).call(this));

        _this5.state = {
            active: false

        };

        _this5.actions = [{ label: 'Cancel', icon: 'close', onClick: function onClick() {
                return _this5.handleCancelClick();
            } }, { label: 'Remove', icon: 'delete_forever', onClick: function onClick() {
                return _this5.handleRemoveClick();
            }, primary: true, raised: true }];
        return _this5;
    }

    _createClass(DashboardRemover, [{
        key: 'remove',
        value: function remove(d) {
            var _this6 = this;

            return new Promise(function (resolve, reject) {
                _this6.$resolve = resolve;
                _this6.$reject = reject;
                _this6.setState({ active: true, title: d.title, dashboard: _extends({}, d) });
            });
        }
    }, {
        key: 'handleRemoveClick',
        value: function handleRemoveClick() {
            var _this7 = this;

            _api2.default.removeDashboard(this.state.dashboard).then(function () {
                _this7.$resolve(_this7.state.dashboard);
                _this7.setState({ active: false });
            });
        }
    }, {
        key: 'handleCancelClick',
        value: function handleCancelClick() {
            this.setState({ active: false });
        }
    }, {
        key: 'render',
        value: function render() {
            return _react2.default.createElement(_reactToolbox.Dialog, {
                active: this.state.active,
                actions: this.actions,
                title: 'Remove dashboard ' + this.state.title
            });
        }
    }]);

    return DashboardRemover;
}(_react2.default.Component);

var DashboardAcccesEditor = function (_React$Component3) {
    _inherits(DashboardAcccesEditor, _React$Component3);

    function DashboardAcccesEditor() {
        _classCallCheck(this, DashboardAcccesEditor);

        var _this8 = _possibleConstructorReturn(this, (DashboardAcccesEditor.__proto__ || Object.getPrototypeOf(DashboardAcccesEditor)).call(this));

        _this8.state = {
            active: false
        };
        _this8.actions = [{ label: 'Cancel', icon: 'cancel', onClick: function onClick() {
                return _this8.handleCancelClick();
            } }, { label: 'Save', icon: 'check', onClick: function onClick() {
                return _this8.handleApplyClick();
            }, primary: true, raised: true }];
        return _this8;
    }

    _createClass(DashboardAcccesEditor, [{
        key: 'editAcl',
        value: function editAcl($d) {
            var _this9 = this;

            return new Promise(function (resolve, reject) {
                _this9.$resolve = resolve;
                _this9.$reject = reject;
                _this9.setState({ active: true, dashboard: _extends({}, $d), title: $d.title });
            });
        }
    }, {
        key: 'handleApplyClick',
        value: function handleApplyClick() {
            this.$resolve();
            this.setState({ active: false });
        }
    }, {
        key: 'handleCancelClick',
        value: function handleCancelClick() {
            this.setState({ active: false });
        }
    }, {
        key: 'render',
        value: function render() {
            return _react2.default.createElement(_reactToolbox.Dialog, {
                active: this.state.active,
                actions: this.actions,
                title: 'Access for ' + this.state.title
            });
        }
    }]);

    return DashboardAcccesEditor;
}(_react2.default.Component);

var DashboardsList = exports.DashboardsList = function (_React$Component4) {
    _inherits(DashboardsList, _React$Component4);

    function DashboardsList() {
        _classCallCheck(this, DashboardsList);

        var _this10 = _possibleConstructorReturn(this, (DashboardsList.__proto__ || Object.getPrototypeOf(DashboardsList)).call(this));

        _this10.state = {
            dashboards: []
        };
        _api2.default.getDashboards().then(function (dashboards) {
            return _this10.setState({ dashboards: dashboards });
        });
        return _this10;
    }

    _createClass(DashboardsList, [{
        key: 'componentWillMount',
        value: function componentWillMount() {
            var _this11 = this;

            this.$sub = _eventbus2.default.subscribe('/dashboard/saved', function (dashboard) {
                var dashboards = _this11.state.dashboards;
                var index = dashboards.findIndex(function (d) {
                    return d._id == dashboard._id;
                });
                if (index == -1) dashboards.push(dashboard);else dashboards[index] = dashboard;
                _this11.setState({ dashboards: dashboards });
            });

            this.$removeSub = _eventbus2.default.subscribe('/dashboard/removed', function (dashboard) {
                console.log(dashboard);
                var dashboards = _this11.state.dashboards;
                var index = dashboards.findIndex(function (d) {
                    return d._id == dashboard._id;
                });
                dashboards.splice(index, 1);
                _this11.setState({ dashboards: dashboards });
            });
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.$sub();
            this.$removeSub();
        }
    }, {
        key: 'handleDashboardEdit',
        value: function handleDashboardEdit(d) {
            var _this12 = this;

            this.editor.edit(d).then(function (dashboard) {
                var dashboards = _this12.state.dashboards;
                var index = dashboards.findIndex(function (d) {
                    return d._id == dashboard._id;
                });
                dashboards[index] = dashboard;
                _this12.setState({ dashboards: dashboards });
            });
        }
    }, {
        key: 'handleDashboardCreate',
        value: function handleDashboardCreate() {
            this.editor.edit({ title: '', icon: '' }).then(function (dashboard) {});
        }
    }, {
        key: 'handleDashboardRemove',
        value: function handleDashboardRemove(d) {
            this.remover.remove(d).then(function (dashboard) {});
        }
    }, {
        key: 'handleDashboardAccess',
        value: function handleDashboardAccess(d) {
            this.acleditor.editAcl(d);
        }
    }, {
        key: 'handleAppbarClick',
        value: function handleAppbarClick() {
            this.props.onMenuClick ? this.props.onMenuClick() : null;
        }
    }, {
        key: 'actions',
        value: function actions(d, k) {
            var _this13 = this;

            return [_react2.default.createElement(
                _menu.IconMenu,
                { key: k, icon: 'more_vert' },
                _react2.default.createElement(_menu.MenuItem, { caption: 'Edit', icon: 'mode_edit', onClick: function onClick() {
                        return _this13.handleDashboardEdit(d);
                    } }),
                _react2.default.createElement(_menu.MenuItem, { caption: 'Access', icon: 'lock_outline', onClick: function onClick() {
                        return _this13.handleDashboardAccess(d);
                    } }),
                _react2.default.createElement(_menu.MenuItem, { caption: 'Remove', icon: 'delete_forever', onClick: function onClick() {
                        return _this13.handleDashboardRemove(d);
                    } })
            )];
        }
    }, {
        key: 'render',
        value: function render() {
            var _this14 = this;

            return _react2.default.createElement(
                'div',
                { style: { position: 'relative' } },
                _react2.default.createElement(
                    _app_bar2.default,
                    { title: 'Dashboards', leftIcon: 'menu', onLeftIconClick: function onLeftIconClick() {
                            return _this14.handleAppbarClick();
                        } },
                    _react2.default.createElement(_reactToolbox.Button, { mini: true, icon: 'add', onClick: function onClick() {
                            return _this14.handleDashboardCreate();
                        }, inverse: true, label: 'Create' })
                ),
                _react2.default.createElement(
                    _list.List,
                    { ripple: false },
                    this.state.dashboards.map(function (d, k) {
                        return _react2.default.createElement(_list.ListItem, { key: k, caption: d.title, leftIcon: d.icon, rightActions: _this14.actions(d, k), ripple: false, selectable: false });
                    })
                ),
                _react2.default.createElement(DashboardEditor, { ref: function ref(e) {
                        return _this14.editor = e;
                    } }),
                _react2.default.createElement(DashboardRemover, { ref: function ref(e) {
                        return _this14.remover = e;
                    } }),
                _react2.default.createElement(DashboardAcccesEditor, { ref: function ref(e) {
                        return _this14.acleditor = e;
                    } })
            );
        }
    }]);

    return DashboardsList;
}(_react2.default.Component);

/***/ }),

/***/ "./src_admin/dashboard/dashboardlist-style.css":
/* no static exports found */
/* all exports used */
/*!*****************************************************!*\
  !*** ./src_admin/dashboard/dashboardlist-style.css ***!
  \*****************************************************/
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../~/css-loader??ref--2-1!../../~/postcss-loader/lib!./dashboardlist-style.css */ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/dashboard/dashboardlist-style.css");
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(/*! ../../~/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./dashboardlist-style.css", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./dashboardlist-style.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ "./src_admin/devices/cardview.js":
/* no static exports found */
/* all exports used */
/*!***************************************!*\
  !*** ./src_admin/devices/cardview.js ***!
  \***************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.UnknownDeviceView = exports.KnownDeviceView = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _reactToolbox = __webpack_require__(/*! react-toolbox */ "./node_modules/react-toolbox/lib/index.js");

var _card = __webpack_require__(/*! react-toolbox/lib/card */ "./node_modules/react-toolbox/lib/card/index.js");

var _list = __webpack_require__(/*! react-toolbox/lib/list */ "./node_modules/react-toolbox/lib/list/index.js");

var _dialog = __webpack_require__(/*! react-toolbox/lib/dialog */ "./node_modules/react-toolbox/lib/dialog/index.js");

var _dialog2 = _interopRequireDefault(_dialog);

var _progress_bar = __webpack_require__(/*! react-toolbox/lib/progress_bar */ "./node_modules/react-toolbox/lib/progress_bar/index.js");

var _progress_bar2 = _interopRequireDefault(_progress_bar);

var _menu = __webpack_require__(/*! react-toolbox/lib/menu */ "./node_modules/react-toolbox/lib/menu/index.js");

var _api = __webpack_require__(/*! ../api */ "./src_admin/api.js");

var _api2 = _interopRequireDefault(_api);

var _styles = __webpack_require__(/*! ./styles */ "./src_admin/devices/styles.css");

var _styles2 = _interopRequireDefault(_styles);

var _eventbus = __webpack_require__(/*! ../eventbus */ "./src_admin/eventbus.js");

var _eventbus2 = _interopRequireDefault(_eventbus);

var _widgetwizzard = __webpack_require__(/*! ./widgetwizzard */ "./src_admin/devices/widgetwizzard.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ExpandableListItem = function (_React$Component) {
    _inherits(ExpandableListItem, _React$Component);

    function ExpandableListItem() {
        _classCallCheck(this, ExpandableListItem);

        var _this = _possibleConstructorReturn(this, (ExpandableListItem.__proto__ || Object.getPrototypeOf(ExpandableListItem)).call(this));

        _this.state = {
            expanded: false
        };
        _this.actions = [_react2.default.createElement(_reactToolbox.Button, { mini: true, icon: 'keyboard_arrow_down', floating: true })];
        return _this;
    }

    _createClass(ExpandableListItem, [{
        key: 'handleToggle',
        value: function handleToggle() {
            this.setState({ expanded: !this.state.expanded });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this2 = this;

            var className = this.state.expanded ? _styles2.default.expanded : _styles2.default.closed;
            var rightIcon = this.state.expanded ? 'keyboard_arrow_up' : 'keyboard_arrow_down';
            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(_list.ListItem, { onClick: function onClick() {
                        return _this2.handleToggle();
                    }, ripple: true, selectable: true, caption: this.props.caption, leftIcon: this.props.leftIcon, rightIcon: rightIcon }),
                _react2.default.createElement(
                    'div',
                    { className: className },
                    this.props.children
                )
            );
        }
    }]);

    return ExpandableListItem;
}(_react2.default.Component);

var KnownDeviceEditDialog = function (_React$Component2) {
    _inherits(KnownDeviceEditDialog, _React$Component2);

    function KnownDeviceEditDialog(props) {
        _classCallCheck(this, KnownDeviceEditDialog);

        var _this3 = _possibleConstructorReturn(this, (KnownDeviceEditDialog.__proto__ || Object.getPrototypeOf(KnownDeviceEditDialog)).call(this));

        _this3.state = {
            active: false,
            name: ''
        };
        _this3.actions = [{ label: 'Apply', onClick: function onClick() {
                return _this3.handleApply();
            } }, { label: 'Cancel', onClick: function onClick() {
                return _this3.setState({ active: false });
            } }];
        return _this3;
    }

    _createClass(KnownDeviceEditDialog, [{
        key: 'handleApply',
        value: function handleApply() {
            this.props.onApply ? this.props.onApply({ name: this.state.name }) : null;
            this.setState({ active: false });
        }
    }, {
        key: 'setDevice',
        value: function setDevice(d) {
            this.setState({ name: d.name, active: true });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this4 = this;

            return _react2.default.createElement(
                _dialog2.default,
                { active: this.state.active, actions: this.actions },
                _react2.default.createElement(_reactToolbox.Input, { label: 'Device name', value: this.state.name, onChange: function onChange(name) {
                        return _this4.setState({ name: name });
                    } })
            );
        }
    }]);

    return KnownDeviceEditDialog;
}(_react2.default.Component);

var KnownDeviceView = exports.KnownDeviceView = function (_React$Component3) {
    _inherits(KnownDeviceView, _React$Component3);

    function KnownDeviceView(props) {
        _classCallCheck(this, KnownDeviceView);

        var _this5 = _possibleConstructorReturn(this, (KnownDeviceView.__proto__ || Object.getPrototypeOf(KnownDeviceView)).call(this));

        _this5.state = {
            editDevice: null,
            sensors: props.device.values || {}

            //this.state.sensors = props.device.profile.sensors.map(s=>props.device.values[s.name]);
            //pros.device.profile.sensors.forEach(s=>this.state.sensors[s.name] = props.device.values[s.name])

        };return _this5;
    }

    _createClass(KnownDeviceView, [{
        key: 'componentWillMount',
        value: function componentWillMount() {
            var _this6 = this;

            console.log(this.state.sensors);
            this.sensorSubsciption = _eventbus2.default.subscribe('/device/sensor/value', function (e) {
                if (e.devId == _this6.props.device.id) {
                    var sensors = _this6.state.sensors;
                    sensors[e.sensor] = e.value;
                    _this6.setState({ sensors: sensors });
                }
            });
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.sensorSubsciption();
        }
    }, {
        key: 'handleForgetClick',
        value: function handleForgetClick() {
            _api2.default.forgetDevice(this.props.device);
        }
    }, {
        key: 'handleEditClick',
        value: function handleEditClick() {
            this.editor.setDevice(this.props.device);
        }
    }, {
        key: 'handleEditorApply',
        value: function handleEditorApply(d) {
            Object.assign(this.props.device, d);
            d.id = this.props.device.id;
            _api2.default.updateDevice(d);
            this.setState({});
        }
    }, {
        key: 'handleWidgetWizzard',
        value: function handleWidgetWizzard() {
            this.widgetWizzard.start(this.props.device);
        }
    }, {
        key: 'render',
        value: function render() {
            var _this7 = this;

            return _react2.default.createElement(
                'div',
                { className: _styles2.default.viewCard },
                _react2.default.createElement(
                    _menu.IconMenu,
                    { icon: 'more_vert', className: _styles2.default.menuIcon, menuRipple: true, position: 'topRight' },
                    _react2.default.createElement(_menu.MenuItem, { icon: 'delete_forever', caption: 'Forget', onClick: function onClick() {
                            return _this7.handleForgetClick();
                        } }),
                    _react2.default.createElement(_menu.MenuItem, { icon: 'mode_edit', caption: 'Edit', onClick: function onClick() {
                            return _this7.handleEditClick();
                        } }),
                    _react2.default.createElement(_menu.MenuItem, { icon: 'add_to_queue', caption: 'Make widget', onClick: function onClick() {
                            return _this7.handleWidgetWizzard();
                        } })
                ),
                _react2.default.createElement(_card.CardTitle, { title: this.props.device.name, subtitle: this.props.device.id }),
                _react2.default.createElement(
                    _list.List,
                    null,
                    _react2.default.createElement(
                        ExpandableListItem,
                        { caption: 'Sensors' },
                        this.props.device.profile.sensors.map(function (s, k) {
                            return _react2.default.createElement(_list.ListItem, { key: k, caption: s.name, legend: s.def, rightIcon: _react2.default.createElement(
                                    'span',
                                    null,
                                    _this7.state.sensors[s.name]
                                ) });
                        })
                    ),
                    _react2.default.createElement(
                        ExpandableListItem,
                        { caption: 'Triggers' },
                        (this.props.device.profile.triggers || []).map(function (t, k) {
                            return _react2.default.createElement(_list.ListItem, { key: k, caption: t.name });
                        })
                    )
                ),
                _react2.default.createElement(KnownDeviceEditDialog, { ref: function ref(c) {
                        return _this7.editor = c;
                    }, onApply: function onApply(d) {
                        return _this7.handleEditorApply(d);
                    } }),
                _react2.default.createElement(_widgetwizzard.WidgetWizzard, { ref: function ref(c) {
                        return _this7.widgetWizzard = c;
                    } })
            );
        }
    }]);

    return KnownDeviceView;
}(_react2.default.Component);

var UnknownDeviceView = exports.UnknownDeviceView = function (_React$Component4) {
    _inherits(UnknownDeviceView, _React$Component4);

    function UnknownDeviceView(props) {
        _classCallCheck(this, UnknownDeviceView);

        var _this8 = _possibleConstructorReturn(this, (UnknownDeviceView.__proto__ || Object.getPrototypeOf(UnknownDeviceView)).call(this));

        _this8.state = {
            pinDialog: false,
            pincode: '',
            name: props.device.name
        };
        return _this8;
    }

    _createClass(UnknownDeviceView, [{
        key: 'handleAuthAction',
        value: function handleAuthAction() {
            if (this.state.pincode !== '') {
                this.props.device.pincode = this.state.pincode;
                this.setState({ pinDialog: false });
                _api2.default.authorizeDevice({ id: this.props.device.id, pincode: this.state.pincode, name: this.state.name });
            }
        }
    }, {
        key: 'handleResetPincode',
        value: function handleResetPincode() {
            _api2.default.authorizeDevice({ id: this.props.device.id, pincode: '' });
            console.log('Pin reset');
            this.props.device.pincode = null;
            this.setState({ pincode: '' });
        }
    }, {
        key: 'handleAuthCancel',
        value: function handleAuthCancel() {

            this.setState({ pinDialog: false });
        }
    }, {
        key: 'handlePincodeChange',
        value: function handlePincodeChange(v) {
            this.setState({ pincode: v });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this9 = this;

            var authDialogActions = [{ icon: 'check', label: 'Authorize', onClick: function onClick() {
                    return _this9.handleAuthAction();
                } }, { icon: 'close', label: 'Cancel', onClick: function onClick() {
                    return _this9.handleAuthCancel();
                } }];
            var ActionsPane = this.props.device.pincode ? _react2.default.createElement(
                'div',
                { style: { width: '100%' } },
                _react2.default.createElement(
                    'h4',
                    null,
                    'Trying to authorize '
                ),
                _react2.default.createElement(_progress_bar2.default, { type: 'linear', mode: 'indeterminate', multicolor: true }),
                _react2.default.createElement(_reactToolbox.Button, { label: 'Cancel', onClick: function onClick() {
                        return _this9.handleResetPincode();
                    } })
            ) : _react2.default.createElement(_reactToolbox.Button, { label: 'Authorize', onClick: function onClick() {
                    return _this9.setState({ pinDialog: true });
                } });
            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(_card.CardTitle, { title: this.props.device.devSerial, subtitle: this.props.device.id }),
                _react2.default.createElement(
                    _list.List,
                    null,
                    _react2.default.createElement(_list.ListSubHeader, { caption: 'Serial' }),
                    _react2.default.createElement(_list.ListItem, { caption: this.props.device.devSerial }),
                    _react2.default.createElement(_list.ListSubHeader, { caption: 'Profile' }),
                    _react2.default.createElement(_list.ListItem, { caption: this.props.device.devClass })
                ),
                _react2.default.createElement(
                    _card.CardActions,
                    null,
                    ActionsPane
                ),
                _react2.default.createElement(
                    _dialog2.default,
                    { active: this.state.pinDialog,
                        actions: authDialogActions,
                        title: 'Auth device',
                        onOverlayClick: function onOverlayClick() {
                            return _this9.handleAuthCancel();
                        },
                        onEscKeyDown: function onEscKeyDown() {
                            return _this9.handleAuthCancel();
                        } },
                    _react2.default.createElement(_reactToolbox.Input, { label: 'Device name', value: this.state.name, onChange: function onChange(v) {
                            return _this9.setState({ name: v });
                        } }),
                    _react2.default.createElement(_reactToolbox.Input, { label: 'Pincode', value: this.state.pincode, onChange: function onChange(v) {
                            return _this9.handlePincodeChange(v);
                        }, required: true })
                )
            );
        }
    }]);

    return UnknownDeviceView;
}(_react2.default.Component);

/***/ }),

/***/ "./src_admin/devices/devices-style.css":
/* no static exports found */
/* all exports used */
/*!*********************************************!*\
  !*** ./src_admin/devices/devices-style.css ***!
  \*********************************************/
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../~/css-loader??ref--2-1!../../~/postcss-loader/lib!./devices-style.css */ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/devices/devices-style.css");
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(/*! ../../~/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./devices-style.css", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./devices-style.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ "./src_admin/devices/devices.js":
/* no static exports found */
/* all exports used */
/*!**************************************!*\
  !*** ./src_admin/devices/devices.js ***!
  \**************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Devices = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _app_bar = __webpack_require__(/*! react-toolbox/lib/app_bar */ "./node_modules/react-toolbox/lib/app_bar/index.js");

var _app_bar2 = _interopRequireDefault(_app_bar);

var _eventbus = __webpack_require__(/*! ../eventbus */ "./src_admin/eventbus.js");

var _eventbus2 = _interopRequireDefault(_eventbus);

var _api = __webpack_require__(/*! ../api */ "./src_admin/api.js");

var _api2 = _interopRequireDefault(_api);

var _card = __webpack_require__(/*! react-toolbox/lib/card */ "./node_modules/react-toolbox/lib/card/index.js");

var _cardview = __webpack_require__(/*! ./cardview */ "./src_admin/devices/cardview.js");

var _devicesStyle = __webpack_require__(/*! ./devices-style */ "./src_admin/devices/devices-style.css");

var _devicesStyle2 = _interopRequireDefault(_devicesStyle);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Devices = exports.Devices = function (_React$Component) {
    _inherits(Devices, _React$Component);

    function Devices() {
        _classCallCheck(this, Devices);

        var _this = _possibleConstructorReturn(this, (Devices.__proto__ || Object.getPrototypeOf(Devices)).call(this));

        _this.state = {
            devices: _api2.default.getDevices()
        };
        return _this;
    }

    _createClass(Devices, [{
        key: 'componentWillMount',
        value: function componentWillMount() {
            var _this2 = this;

            this.sub = _eventbus2.default.subscribe('/device/list/updated', function () {
                _this2.setState({ devices: _api2.default.getDevices() });
            });
            this.discoverSub = _eventbus2.default.subscribe('/device/discover', function (device) {

                _eventbus2.default.emit('/курлык', {
                    title: '\u041A\u0443\u0440\u043B\u044B\u043A! \u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u043E \u043D\u043E\u0432\u043E\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E ' + device.devSerial
                });
            });
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.sub();
        }
    }, {
        key: 'handleAppMenuClick',
        value: function handleAppMenuClick() {
            this.props.onMenuClick ? this.props.onMenuClick() : null;
        }
    }, {
        key: 'render',
        value: function render() {
            var _this3 = this;

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(_app_bar2.default, { title: 'Devices', leftIcon: 'menu', onLeftIconClick: function onLeftIconClick() {
                        return _this3.handleAppMenuClick();
                    } }),
                _react2.default.createElement(
                    'div',
                    { className: _devicesStyle2.default.devicesPane },
                    this.state.devices.map(function (d, k) {
                        var View = d.profile ? _cardview.KnownDeviceView : _cardview.UnknownDeviceView;
                        return _react2.default.createElement(
                            _card.Card,
                            { key: k, style: { width: '400px' } },
                            _react2.default.createElement(View, { device: d })
                        );
                    })
                )
            );
        }
    }]);

    return Devices;
}(_react2.default.Component);

/***/ }),

/***/ "./src_admin/devices/styles.css":
/* no static exports found */
/* all exports used */
/*!**************************************!*\
  !*** ./src_admin/devices/styles.css ***!
  \**************************************/
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../~/css-loader??ref--2-1!../../~/postcss-loader/lib!./styles.css */ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/devices/styles.css");
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(/*! ../../~/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./styles.css", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./styles.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ "./src_admin/devices/widgetwizzard.js":
/* no static exports found */
/* all exports used */
/*!********************************************!*\
  !*** ./src_admin/devices/widgetwizzard.js ***!
  \********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.WidgetWizzard = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = __webpack_require__(/*! react */ "./node_modules/react/react.js");

var _react2 = _interopRequireDefault(_react);

var _api = __webpack_require__(/*! ../api */ "./src_admin/api.js");

var _api2 = _interopRequireDefault(_api);

var _dialog = __webpack_require__(/*! react-toolbox/lib/dialog */ "./node_modules/react-toolbox/lib/dialog/index.js");

var _dialog2 = _interopRequireDefault(_dialog);

var _list = __webpack_require__(/*! react-toolbox/lib/list */ "./node_modules/react-toolbox/lib/list/index.js");

var _wizzardStyle = __webpack_require__(/*! ./wizzard-style */ "./src_admin/devices/wizzard-style.css");

var _wizzardStyle2 = _interopRequireDefault(_wizzardStyle);

var _reactToolbox = __webpack_require__(/*! react-toolbox */ "./node_modules/react-toolbox/lib/index.js");

var _components = __webpack_require__(/*! ../components */ "./src_admin/components/index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
// import FontIcon from 'react-toolbox/lib/font_icon';


var Step2Custom = function (_React$Component) {
    _inherits(Step2Custom, _React$Component);

    function Step2Custom(props) {
        _classCallCheck(this, Step2Custom);

        return _possibleConstructorReturn(this, (Step2Custom.__proto__ || Object.getPrototypeOf(Step2Custom)).call(this));
    }

    _createClass(Step2Custom, [{
        key: 'render',
        value: function render() {
            return _react2.default.createElement(
                'div',
                null,
                'Step2Custom'
            );
        }
    }]);

    return Step2Custom;
}(_react2.default.Component);

var StepComplete = function (_React$Component2) {
    _inherits(StepComplete, _React$Component2);

    function StepComplete() {
        _classCallCheck(this, StepComplete);

        return _possibleConstructorReturn(this, (StepComplete.__proto__ || Object.getPrototypeOf(StepComplete)).apply(this, arguments));
    }

    _createClass(StepComplete, [{
        key: 'render',
        value: function render() {
            var cfg = JSON.stringify(this.props.config);
            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    'h1',
                    null,
                    'Congratulations!'
                ),
                _react2.default.createElement(
                    'h3',
                    null,
                    'Widget has been added to dashboard'
                ),
                _react2.default.createElement(_reactToolbox.FontIcon, { className: _wizzardStyle2.default.congratulationIcon, value: 'thumb_up' })
            );
        }
    }]);

    return StepComplete;
}(_react2.default.Component);

StepComplete.isFinal = true;

var Step5 = function (_React$Component3) {
    _inherits(Step5, _React$Component3);

    function Step5() {
        _classCallCheck(this, Step5);

        var _this3 = _possibleConstructorReturn(this, (Step5.__proto__ || Object.getPrototypeOf(Step5)).call(this));

        _this3.state = {
            dashboards: [],
            selected: []
        };

        _api2.default.getDashboards().then(function (dashboards) {
            return _this3.setState({ dashboards: dashboards });
        });
        return _this3;
    }

    _createClass(Step5, [{
        key: 'handleNext',
        value: function handleNext() {
            var _this4 = this;

            var dashboards = this.state.selected.map(function (k) {
                return _this4.state.dashboards[k]._id;
            });

            _api2.default.appendWidget(dashboards, this.props.config);
            return StepComplete;
        }
    }, {
        key: 'title',
        value: function title() {
            return 'Select dashboards';
        }
    }, {
        key: 'handleDashboardSelect',
        value: function handleDashboardSelect(k) {
            var selected = this.state.selected;
            var i = selected.indexOf(k);
            if (i > -1) {
                selected.splice(i, 1);
            } else {
                selected.push(k);
            }
            this.setState({ selected: selected });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this5 = this;

            return _react2.default.createElement(
                _list.List,
                { selectable: true },
                this.state.dashboards.map(function (d, i) {
                    var rightIcon = _this5.state.selected.indexOf(i) > -1 ? 'check_box' : 'check_box_outline_blank';
                    return _react2.default.createElement(_list.ListItem, { key: i, leftIcon: d.icon, caption: d.title, rightIcon: rightIcon, onClick: function onClick() {
                            return _this5.handleDashboardSelect(i);
                        } });
                })
            );
        }
    }]);

    return Step5;
}(_react2.default.Component);
//Select name and icon


var Step4 = function (_React$Component4) {
    _inherits(Step4, _React$Component4);

    function Step4(props) {
        _classCallCheck(this, Step4);

        var _this6 = _possibleConstructorReturn(this, (Step4.__proto__ || Object.getPrototypeOf(Step4)).call(this));

        _this6.state = {
            label: props.device.devSerial,
            description: props.device.devClass,
            icon: 'extension'
        };
        return _this6;
    }

    _createClass(Step4, [{
        key: 'handleNext',
        value: function handleNext() {
            Object.assign(this.props.config, _extends({}, this.state));
            return Step5;
        }
    }, {
        key: 'render',
        value: function render() {
            var _this7 = this;

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    'h3',
                    null,
                    'Config widget'
                ),
                _react2.default.createElement(_reactToolbox.Input, { label: 'Widget title', value: this.state.label, onChange: function onChange(label) {
                        return _this7.setState({ label: label });
                    }, required: true }),
                _react2.default.createElement(_reactToolbox.Input, { label: 'Widget subtitle', value: this.state.description, onChange: function onChange(description) {
                        return _this7.setState({ description: description });
                    }, required: true }),
                _react2.default.createElement(_components.IconSelector, { label: 'Widget icon', value: this.state.icon, onChange: function onChange(icon) {
                        return _this7.setState({ icon: icon });
                    } })
            );
        }
    }]);

    return Step4;
}(_react2.default.Component);

//Select triggers step


var Step3 = function (_React$Component5) {
    _inherits(Step3, _React$Component5);

    function Step3() {
        _classCallCheck(this, Step3);

        var _this8 = _possibleConstructorReturn(this, (Step3.__proto__ || Object.getPrototypeOf(Step3)).call(this));

        _this8.state = {
            selected: []
        };
        return _this8;
    }

    _createClass(Step3, [{
        key: 'handleNext',
        value: function handleNext() {
            var _this9 = this;

            this.props.config.triggers = this.state.selected.map(function (t) {
                return {
                    title: t.name,
                    trigger: _this9.props.device.id + '.' + t.name
                };
            });

            return Step4;
        }
    }, {
        key: 'toggleSensorSelect',
        value: function toggleSensorSelect(t) {
            var selected = this.state.selected;
            var i = selected.indexOf(t);
            if (i > -1) {
                selected.splice(i, 1);
            } else {
                selected.push(t);
            }
            this.setState({ selected: selected });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this10 = this;

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    'h3',
                    null,
                    'Select triggers'
                ),
                _react2.default.createElement(
                    _list.List,
                    { selectable: true },
                    this.props.device.profile.triggers.map(function (t, k) {
                        var icon = _this10.state.selected.indexOf(t) > -1 ? 'check_box' : 'check_box_outline_blank';
                        return _react2.default.createElement(_list.ListItem, { key: k, caption: t.name, rightIcon: icon, onClick: function onClick(e) {
                                return _this10.toggleSensorSelect(t);
                            } });
                    })
                )
            );
        }
    }]);

    return Step3;
}(_react2.default.Component);
//Select sensors step


var Step2 = function (_React$Component6) {
    _inherits(Step2, _React$Component6);

    function Step2() {
        _classCallCheck(this, Step2);

        var _this11 = _possibleConstructorReturn(this, (Step2.__proto__ || Object.getPrototypeOf(Step2)).call(this));

        _this11.state = {
            selected: []
        };
        return _this11;
    }

    _createClass(Step2, [{
        key: 'handleNext',
        value: function handleNext() {
            var _this12 = this;

            this.props.config.sensors = this.state.selected.map(function (s) {
                return {
                    title: s.name,
                    sensor: _this12.props.device.id + '.' + s.name
                };
            });

            return Step3;
        }
    }, {
        key: 'toggleSensorSelect',
        value: function toggleSensorSelect(s) {
            var selected = this.state.selected;
            var i = selected.indexOf(s);
            if (i > -1) {
                selected.splice(i, 1);
            } else {
                selected.push(s);
            }
            this.setState({ selected: selected });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this13 = this;

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    'h3',
                    null,
                    'Select sensors'
                ),
                _react2.default.createElement(
                    _list.List,
                    { selectable: true },
                    this.props.device.profile.sensors.map(function (s, k) {
                        var icon = _this13.state.selected.indexOf(s) > -1 ? 'check_box' : 'check_box_outline_blank';
                        return _react2.default.createElement(_list.ListItem, { key: k, caption: s.name, rightIcon: icon, onClick: function onClick(e) {
                                return _this13.toggleSensorSelect(s);
                            } });
                    })
                )
            );
        }
    }]);

    return Step2;
}(_react2.default.Component);
// Select widget class


var Step1 = function (_React$Component7) {
    _inherits(Step1, _React$Component7);

    function Step1(props) {
        _classCallCheck(this, Step1);

        var _this14 = _possibleConstructorReturn(this, (Step1.__proto__ || Object.getPrototypeOf(Step1)).call(this));

        _this14.state = {
            widgets: [{ class: 'default', title: 'Default' }]
        };

        return _this14;
    }

    _createClass(Step1, [{
        key: 'handleNext',
        value: function handleNext() {
            if (this.state.selected) {
                this.props.config.class = this.state.selected.class;
                if (this.state.selected.class == 'default') return Step2;else return Step2Custom;
            }
        }
    }, {
        key: 'componentWillMount',
        value: function componentWillMount() {
            var _this15 = this;

            _api2.default.getWidgetClasses(this.props.device.devClass).then(function (classes) {
                var widgets = _this15.state.widgets;
                var selected = _this15.state.selected;

                classes.forEach(function (c) {
                    return widgets.push(c);
                });
                if (!selected) selected = widgets[0];
                _this15.setState({ widgets: widgets, selected: selected });
            });
        }
    }, {
        key: 'handleWidgetSelect',
        value: function handleWidgetSelect(selected) {
            this.setState({ selected: selected });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this16 = this;

            return _react2.default.createElement(
                'div',
                null,
                _react2.default.createElement(
                    'h3',
                    null,
                    'Select widget:'
                ),
                _react2.default.createElement(
                    _list.List,
                    { selectable: true },
                    this.state.widgets.map(function (w, k) {
                        var icon = w == _this16.state.selected ? 'radio_button_checked' : 'radio_button_unchecked';
                        return _react2.default.createElement(_list.ListItem, { key: k, caption: w.title, onClick: function onClick() {
                                return _this16.handleWidgetSelect(w);
                            }, rightIcon: icon });
                    })
                )
            );
        }
    }]);

    return Step1;
}(_react2.default.Component);

var WidgetWizzard = exports.WidgetWizzard = function (_React$Component8) {
    _inherits(WidgetWizzard, _React$Component8);

    function WidgetWizzard() {
        _classCallCheck(this, WidgetWizzard);

        var _this17 = _possibleConstructorReturn(this, (WidgetWizzard.__proto__ || Object.getPrototypeOf(WidgetWizzard)).call(this));

        _this17.state = {
            active: false,
            step: 1
        };
        _this17.actions = [{ label: 'Cancel', icon: 'cancel', onClick: function onClick() {
                return _this17.handleCancelClick();
            } }, { label: 'Next', icon: 'navigate_next', onClick: function onClick() {
                return _this17.handleNextClick(_this17.state.step + 1);
            } }];
        return _this17;
    }

    _createClass(WidgetWizzard, [{
        key: 'handleCancelClick',
        value: function handleCancelClick() {
            this.setState({ device: null, active: false });
        }
    }, {
        key: 'handleNextClick',
        value: function handleNextClick(step) {
            //this.setState({step});
            if (this.step && this.step.handleNext) {
                var nextStep = this.step.handleNext();
                if (nextStep) {
                    this.setState({ step: nextStep });
                }
            }
        }
    }, {
        key: 'start',
        value: function start(device) {
            this.setState({ device: device, active: true, step: Step1, config: {} });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this18 = this;

            var Step = this.state.step;
            var actions = Step.isFinal ? [{ icon: 'done_all', label: 'Done', onClick: function onClick() {
                    return _this18.handleCancelClick();
                } }] : this.actions;
            if (this.state.device) return _react2.default.createElement(
                _dialog2.default,
                { active: this.state.active, title: this.state.device.name, actions: actions },
                _react2.default.createElement(Step, { ref: function ref(e) {
                        return _this18.step = e;
                    }, device: this.state.device, config: this.state.config })
            );else return null;
        }
    }]);

    return WidgetWizzard;
}(_react2.default.Component);

/***/ }),

/***/ "./src_admin/devices/wizzard-style.css":
/* no static exports found */
/* all exports used */
/*!*********************************************!*\
  !*** ./src_admin/devices/wizzard-style.css ***!
  \*********************************************/
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(/*! !../../~/css-loader??ref--2-1!../../~/postcss-loader/lib!./wizzard-style.css */ "./node_modules/css-loader/index.js?{\"modules\":true,\"sourceMap\":true,\"localIdentName\":\"[name]__[local]--[hash:base64:8]\"}!./node_modules/postcss-loader/lib/index.js!./src_admin/devices/wizzard-style.css");
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(/*! ../../~/style-loader/lib/addStyles.js */ "./node_modules/style-loader/lib/addStyles.js")(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./wizzard-style.css", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js??ref--2-1!../../node_modules/postcss-loader/lib/index.js!./wizzard-style.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),

/***/ "./src_admin/eventbus.js":
/* no static exports found */
/* all exports used */
/*!*******************************!*\
  !*** ./src_admin/eventbus.js ***!
  \*******************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});


var subs = {};

function subscribe(key, $fn) {
    var subsList = subs[key];
    if (!subsList) {
        subsList = new Array();
        subs[key] = subsList;
    }
    var subscribtion = {
        fn: $fn
    };

    subsList.push(subscribtion);
    return function () {
        var subsList = subs[key];
        if (subsList) {
            var i = subsList.indexOf(subscribtion);
            if (i > -1) {
                subsList.splice(i, 1);
            }
        }
    };
}

function emit(key, event) {
    var subsList = subs[key];
    if (subsList) {
        subsList.forEach(function (s) {
            return s.fn(event);
        });
    }
}

var eventbus = {
    subscribe: subscribe,
    emit: emit
};

exports.default = eventbus;

window.$eventbus = eventbus;

/***/ })

},["./src_admin/app.js"]);